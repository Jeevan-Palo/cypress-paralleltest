version: 2.1
jobs:
  test:    # use Cypress built Docker image with Node 10 and npm 6
    docker:
      - image: cypress/base:10
    parallelism: 3
    steps:
      - checkout
      # note: omitting caching for brevity
      # quickly install NPM dependencies
      - npm ci
      # load balance all tests across 4 CI machines
      - $(npm bin)/cypress run --parallel
